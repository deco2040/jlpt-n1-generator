<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>JLPT N1 AI ë¬¸ì œ ìƒì„±ê¸°</title>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <meta name="theme-color" content="#3B82F6">
    <meta name="description" content="Claude AIê°€ ì‹¤ì‹œê°„ìœ¼ë¡œ ìƒˆë¡œìš´ JLPT N1 ë¬¸ì œë¥¼ ìƒì„±í•©ë‹ˆë‹¤">

    <!-- íŒŒë¹„ì½˜ ì„¤ì • -->
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>ğŸ‡¯ğŸ‡µ</text></svg>">

    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', sans-serif;
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;
        const { createRoot } = ReactDOM;

        // ë¡œë”© ì•„ì´ì½˜ ì»´í¬ë„ŒíŠ¸
        const LoaderIcon = () => (
            <svg className="animate-spin -ml-1 mr-3 h-5 w-5 text-white" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
                <circle className="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" strokeWidth="4"></circle>
                <path className="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
            </svg>
        );

        const JLPTGenerator = () => {
            const [currentProblem, setCurrentProblem] = useState(null);
            const [selectedType, setSelectedType] = useState('random');
            const [showAnswer, setShowAnswer] = useState(false);
            const [score, setScore] = useState({ correct: 0, total: 0 });
            const [isGenerating, setIsGenerating] = useState(false);
            const [generationHistory, setGenerationHistory] = useState([]);
            const [apiStatus, setApiStatus] = useState('í™•ì¸ ì¤‘...');

            // ë°±ì—…ìš© ë¡œì»¬ ë¬¸ì œ ë°ì´í„°
            const backupProblems = {
                kanji: [
                    {
                        question: "ì´ ì§€ì—­ì€**è±Šç©£**í•œ í† ì§€ë¡œ ì•Œë ¤ì ¸ ìˆë‹¤.",
                        underlined: "è±Šç©£",
                        choices: ["ã»ã†ã˜ã‚‡ã†", "ã»ã†ã‚ã†", "ã½ã†ã˜ã‚‡ã†", "ã¼ã†ã˜ã‚‡ã†"],
                        correct: 0,
                        explanation: "è±Šç©£ï¼ˆã»ã†ã˜ã‚‡ã†ï¼‰= í’ìš”ë¡œìš´, ë¹„ì˜¥í•œ",
                        source: "ë¡œì»¬"
                    },
                    {
                        question: "ê·¸ì˜**æ´å¯ŸåŠ›**ì—ëŠ” ë†€ëë‹¤.",
                        underlined: "æ´å¯ŸåŠ›", 
                        choices: ["ã©ã†ã•ã¤ã‚Šã‚‡ã", "ã¨ã†ã•ã¤ã‚Šã‚‡ã", "ã©ã†ã›ã¤ã‚Šã‚‡ã", "ã¨ã†ã›ã¤ã‚Šã‚‡ã"],
                        correct: 0,
                        explanation: "æ´å¯ŸåŠ›ï¼ˆã©ã†ã•ã¤ã‚Šã‚‡ãï¼‰= í†µì°°ë ¥",
                        source: "ë¡œì»¬"
                    },
                    {
                        question: "ì´**æ©Ÿå™¨**ì˜ ì„±ëŠ¥ì€ ë›°ì–´ë‚˜ë‹¤.",
                        underlined: "æ©Ÿå™¨",
                        choices: ["ãã", "ããŒ", "ãã‘", "ãã"],
                        correct: 0,
                        explanation: "æ©Ÿå™¨ï¼ˆããï¼‰= ê¸°ê¸°, ê¸°ê³„",
                        source: "ë¡œì»¬"
                    }
                ],
                grammar: [
                    {
                        question: "ê·¸ëŠ” ë°”ìœï¼ˆã€€ï¼‰ë§¤ì¼ ê³µë¶€ë¥¼ ê³„ì†í•˜ê³  ìˆë‹¤.",
                        choices: ["ã«ã‚‚ã‹ã‹ã‚ã‚‰ãš", "ã«ã‚ˆã£ã¦", "ã«ãŠã„ã¦", "ã«å¯¾ã—ã¦"],
                        correct: 0,
                        explanation: "ã«ã‚‚ã‹ã‹ã‚ã‚‰ãš = ~ì—ë„ ë¶ˆêµ¬í•˜ê³ ",
                        source: "ë¡œì»¬"
                    },
                    {
                        question: "ì´ ê³„íšì€ ë¹„ìš©ï¼ˆã€€ï¼‰ë¬¸ì œê°€ ìˆë‹¤.",
                        choices: ["ã«ã¨ã£ã¦", "ã®ç‚¹ã§", "ã¨ã—ã¦", "ã«ã‚ˆã£ã¦"],
                        correct: 1,
                        explanation: "~ã®ç‚¹ã§ = ~ì˜ ë©´ì—ì„œ, ~ì— ê´€í•´ì„œ",
                        source: "ë¡œì»¬"
                    },
                    {
                        question: "ê·¸ì˜ ì˜ê²¬ì€ ì°¸ê³ ï¼ˆã€€ï¼‰í•œë‹¤.",
                        choices: ["ã«ã™ããªã„", "ã«ãªã‚‹", "ã«ã™ã‚‹", "ã«ã¯ãªã‚‰ãªã„"],
                        correct: 1,
                        explanation: "å‚è€ƒã«ãªã‚‹ = ì°¸ê³ ê°€ ë˜ë‹¤",
                        source: "ë¡œì»¬"
                    }
                ],
                vocabulary: [
                    {
                        question: "ìƒˆë¡œìš´ ì‹œìŠ¤í…œì˜ï¼ˆã€€ï¼‰ì„ ìœ„í•´ ì—°ìˆ˜ë¥¼ ì‹¤ì‹œí•œë‹¤.",
                        choices: ["æµ¸é€", "æ²ˆæ®¿", "æµ¸æ°´", "æ²ˆæ²¡"],
                        correct: 0,
                        explanation: "æµ¸é€ï¼ˆã—ã‚“ã¨ã†ï¼‰= ì¹¨íˆ¬, ë³´ê¸‰",
                        source: "ë¡œì»¬"
                    },
                    {
                        question: "ì´ ë¬¸ì œì˜ï¼ˆã€€ï¼‰ì„ ëª…í™•íˆ í•  í•„ìš”ê°€ ìˆë‹¤.",
                        choices: ["è¦å› ", "è¦å“¡", "ç”¨äºº", "è¦äºº"],
                        correct: 0,
                        explanation: "è¦å› ï¼ˆã‚ˆã†ã„ã‚“ï¼‰= ìš”ì¸, ì›ì¸",
                        source: "ë¡œì»¬"
                    },
                    {
                        question: "í™˜ê²½ ë³´í˜¸ì— ëŒ€í•œï¼ˆã€€ï¼‰ì´ ë†’ì•„ì§€ê³  ìˆë‹¤.",
                        choices: ["é–¢å¿ƒ", "æ„Ÿå¿ƒ", "æ­“ì‹¬", "è¦³å¿ƒ"],
                        correct: 0,
                        explanation: "é–¢å¿ƒï¼ˆã‹ã‚“ã—ã‚“ï¼‰= ê´€ì‹¬",
                        source: "ë¡œì»¬"
                    }
                ],
                reading: [
                    {
                        passage: "í˜„ëŒ€ ì‚¬íšŒì—ì„œ ê¸°ìˆ  í˜ì‹ ì˜ ì†ë„ëŠ” ê°€ì†ë„ì ìœ¼ë¡œ ì¦ê°€í•˜ê³  ìˆë‹¤. íŠ¹íˆ AI ê¸°ìˆ ì˜ ë°œë‹¬ë¡œ ì¸í•´ ì¢…ë˜ ì¸ê°„ì´ ìˆ˜í–‰í•˜ë˜ ì—…ë¬´ì˜ ë§ì€ ë¶€ë¶„ì´ ìë™í™”ë˜ê³  ìˆë‹¤. ì´ëŸ¬í•œ ë³€í™”ëŠ” íš¨ìœ¨ì„±ì˜ í–¥ìƒì„ ê°€ì ¸ì˜¤ëŠ” í•œí¸, ê³ ìš© ë¬¸ì œë¼ëŠ” ìƒˆë¡œìš´ ê³¼ì œë¥¼ ë‚³ê³  ìˆë‹¤.",
                        question: "ì´ ë¬¸ì¥ì˜ ì£¼ìš”í•œ í…Œë§ˆëŠ” ë¬´ì—‡ì¸ê°€?",
                        choices: ["AI ê¸°ìˆ ì˜ ì—­ì‚¬", "ê¸°ìˆ  í˜ì‹ ì— ì˜í•œ ë³€í™”ì™€ ê·¸ ì˜í–¥", "ê³ ìš© ë¬¸ì œì˜ í•´ê²°ì±…", "íš¨ìœ¨ì„± í–¥ìƒì˜ ë°©ë²•"],
                        correct: 1,
                        explanation: "ê¸°ìˆ  í˜ì‹ ì´ ê°€ì ¸ì˜¤ëŠ” ë³€í™”ì™€ ê·¸ ì˜í–¥ì— ëŒ€í•´ ë…¼í•˜ê³  ìˆìŒ",
                        source: "ë¡œì»¬"
                    },
                    {
                        passage: "ì§€ì† ê°€ëŠ¥í•œ ë°œì „ì„ ìœ„í•´ì„œëŠ” í™˜ê²½ ë³´í˜¸ì™€ ê²½ì œ ì„±ì¥ì˜ ì–‘ë¦½ì´ í•„ìˆ˜ì ì´ë‹¤. í•˜ì§€ë§Œ ì´ëŠ” ë§¤ìš° ì–´ë ¤ìš´ ê³¼ì œì´ë©°, ë§ì€ êµ­ê°€ë“¤ì´ ì´ ë¬¸ì œë¡œ ê³ ë¯¼í•˜ê³  ìˆë‹¤. ìµœê·¼ ë“¤ì–´ ì¹œí™˜ê²½ ê¸°ìˆ ì˜ ë°œë‹¬ë¡œ ì¸í•´ í•´ê²°ì˜ ì‹¤ë§ˆë¦¬ê°€ ë³´ì´ê¸° ì‹œì‘í–ˆë‹¤.",
                        question: "ì´ ê¸€ì—ì„œ ì–¸ê¸‰ë˜ì§€ ì•Šì€ ê²ƒì€?",
                        choices: ["í™˜ê²½ê³¼ ê²½ì œì˜ ì–‘ë¦½ì˜ ì–´ë ¤ì›€", "ì¹œí™˜ê²½ ê¸°ìˆ ì˜ ë°œë‹¬", "êµìœ¡ ì œë„ì˜ ê°œí˜", "ì§€ì† ê°€ëŠ¥í•œ ë°œì „ì˜ ì¤‘ìš”ì„±"],
                        correct: 2,
                        explanation: "êµìœ¡ ì œë„ì˜ ê°œí˜ì— ëŒ€í•œ ì–¸ê¸‰ì€ ì—†ìŒ",
                        source: "ë¡œì»¬"
                    }
                ]
            };

            // í…œí”Œë¦¿ ê¸°ë°˜ ë¬¸ì œ ìƒì„± ë°ì´í„°
            const problemTemplates = {
                kanji: {
                    templates: [
                        { sentence: "ì´ {context}ëŠ” {adjective}ë¡œ ì•Œë ¤ì ¸ ìˆë‹¤.", contexts: ["ì§€ì—­", "ê¸°ìˆ ", "ë°©ë²•", "ê¸°ì—…", "ì œë„"], adjectives: ["è±Šç©£", "é©æ–°çš„", "íš¨æœì ", "ì„ ì§„ì ", "íšê¸°ì "] },
                        { sentence: "ê·¸ì˜ {skill}ì—ëŠ” {feeling}ë‹¤.", skills: ["ê¸°ëŠ¥", "ëŠ¥ë ¥", "ì¬ëŠ¥", "ì‹¤ë ¥", "ìˆ˜ì™„"], feelings: ["ê°íƒ„", "ê°ì‹¬", "ê²½ë³µ", "ì¹­ì°¬", "ê°ë™"] },
                        { sentence: "ì´ {object}ì˜ {quality}ëŠ” {level}ë‹¤.", objects: ["ì œí’ˆ", "ì„œë¹„ìŠ¤", "ê¸°ìˆ ", "ì‹œìŠ¤í…œ", "ë°©ë²•"], qualities: ["í’ˆì§ˆ", "ì„±ëŠ¥", "ì •ë„", "íš¨ìœ¨", "ì•ˆì „ì„±"], levels: ["ë›°ì–´ë‚˜", "ìš°ìˆ˜í•˜", "í›Œë¥­í•˜", "íƒì›”í•˜", "ì™„ë²½í•˜"] }
                    ],
                    words: [
                        { word: "è±Šç©£", reading: "ã»ã†ã˜ã‚‡ã†", wrongReadings: ["ã»ã†ã‚ã†", "ã½ã†ã˜ã‚‡ã†", "ã¼ã†ã˜ã‚‡ã†"], meaning: "í’ìš”ë¡œìš´, ë¹„ì˜¥í•œ" },
                        { word: "æ´å¯ŸåŠ›", reading: "ã©ã†ã•ã¤ã‚Šã‚‡ã", wrongReadings: ["ã¨ã†ã•ã¤ã‚Šã‚‡ã", "ã©ã†ã›ã¤ã‚Šã‚‡ã", "ã¨ã†ã›ã¤ã‚Šã‚‡ã"], meaning: "í†µì°°ë ¥" },
                        { word: "é©æ–°çš„", reading: "ã‹ãã—ã‚“ã¦ã", wrongReadings: ["ã‹ãã˜ã‚“ã¦ã", "ã‹ãã—ã¦ã", "ãŒãã—ã‚“ã¦ã"], meaning: "í˜ì‹ ì ì¸" },
                        { word: "é¡•è‘—", reading: "ã‘ã‚“ã¡ã‚‡", wrongReadings: ["ã‘ã‚“ã—ã‚‡", "ã’ã‚“ã¡ã‚‡", "ã’ã‚“ã—ã‚‡"], meaning: "í˜„ì €í•œ, ëšœë ·í•œ" },
                        { word: "æ½œåœ¨", reading: "ã›ã‚“ã–ã„", wrongReadings: ["ã›ã‚“ãŸã„", "ãœã‚“ã–ã„", "ãœã‚“ãŸã„"], meaning: "ì ì¬ì ì¸" },
                        { word: "æ…¢æ€§", reading: "ã¾ã‚“ã›ã„", wrongReadings: ["ã°ã‚“ã›ã„", "ã¾ã‚“ã—ã‚‡ã†", "ã°ã‚“ã—ã‚‡ã†"], meaning: "ë§Œì„±ì ì¸" }
                    ]
                }
            };

            // í´ë¼ìš°ë“œ API ìƒíƒœ í™•ì¸
            const checkAPIStatus = async () => {
                try {
                    // ì‹¤ì œ ë°±ì—”ë“œê°€ ì—†ìœ¼ë¯€ë¡œ ì‹œë®¬ë ˆì´ì…˜
                    await new Promise(resolve => setTimeout(resolve, 1000));
                    setApiStatus('âŒ ë°±ì—”ë“œ API ì—†ìŒ (í…œí”Œë¦¿ ëª¨ë“œ)');
                } catch (error) {
                    setApiStatus('âŒ API ì—°ê²° ì‹¤íŒ¨');
                }
            };




            useEffect(() => {
                checkAPIStatus();
            }, []);

            // í…œí”Œë¦¿ ê¸°ë°˜ ë¬¸ì œ ìƒì„±
            const generateWithTemplate = async (problemType) => {
                setIsGenerating(true);
                try {
                    // ë¡œë”© ì‹œë®¬ë ˆì´ì…˜
                    await new Promise(resolve => setTimeout(resolve, 1500));

                    let generatedProblem;


                    if (problemType === 'kanji') {
                        const targetWord = problemTemplates.kanji.words[Math.floor(Math.random() * problemTemplates.kanji.words.length)];
                        const template = problemTemplates.kanji.templates[Math.floor(Math.random() * problemTemplates.kanji.templates.length)];
                        const context = template.contexts[Math.floor(Math.random() * template.contexts.length)];
                        
                        let sentence = template.sentence.replace('{context}', context).replace('{adjective}', targetWord.word);
                        const allChoices = [targetWord.reading, ...targetWord.wrongReadings].sort(() => Math.random() - 0.5);
                        
                        generatedProblem = {
                            question: sentence.replace(targetWord.word, `**${targetWord.word}**`),
                            underlined: targetWord.word,
                            choices: allChoices,
                            correct: allChoices.indexOf(targetWord.reading),
                            explanation: `${targetWord.word}ï¼ˆ${targetWord.reading}ï¼‰= ${targetWord.meaning}`,
                            type: 'kanji'
                        };





                    } else {
                        // ë‹¤ë¥¸ íƒ€ì…ë“¤ì€ ë°±ì—… ë¬¸ì œì—ì„œ ëœë¤ ì„ íƒ
                        const backupList = backupProblems[problemType];
                        const randomProblem = backupList[Math.floor(Math.random() * backupList.length)];
                        generatedProblem = { ...randomProblem, type: problemType };
                    }

                    const problemWithMeta = {
                        ...generatedProblem,
                        id: Date.now(),
                        source: "í…œí”Œë¦¿ ìƒì„±",
                        generatedAt: new Date().toLocaleString()
                    };

                    setGenerationHistory(prev => [problemWithMeta, ...prev.slice(0, 9)]);
                    return problemWithMeta;

                } catch (error) {
                    console.error("í…œí”Œë¦¿ ë¬¸ì œ ìƒì„± ì‹¤íŒ¨:", error);


                    // ìµœì¢… ë°±ì—…
                    const backupList = backupProblems[problemType];
                    const randomBackup = backupList[Math.floor(Math.random() * backupList.length)];

                    return {
                        ...randomBackup,
                        type: problemType,
                        id: Date.now(),
                        source: "ë¡œì»¬ ë°±ì—…",
                        error: "í…œí”Œë¦¿ ìƒì„± ì‹¤íŒ¨ë¡œ ë°±ì—… ë¬¸ì œë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤."
                    };
                } finally {
                    setIsGenerating(false);
                }
            };















































            // ë¬¸ì œ ìƒì„± ë©”ì¸ í•¨ìˆ˜
            const generateProblem = async () => {
                let problemType = selectedType;
                if (problemType === 'random') {
                    const types = ['kanji', 'grammar', 'vocabulary', 'reading'];
                    problemType = types[Math.floor(Math.random() * types.length)];
                }

                const newProblem = await generateWithCompleteAPI(problemType);
                setCurrentProblem(newProblem);
                setShowAnswer(false);
            };

            // ë‹µì•ˆ ì²˜ë¦¬
            const handleAnswer = (selectedIndex) => {
                if (currentProblem && selectedIndex === currentProblem.correct) {
                    setScore(prev => ({ correct: prev.correct + 1, total: prev.total + 1 }));
                } else {
                    setScore(prev => ({ ...prev, total: prev.total + 1 }));
                }
                setShowAnswer(true);
            };

            // ë‹µì•ˆ ìŠ¤íƒ€ì¼ë§
            const getButtonStyle = (index) => {
                if (!showAnswer) {
                    return "bg-white hover:bg-blue-50 border border-gray-300 text-gray-700";
                }

                if (index === currentProblem.correct) {
                    return "bg-green-100 border-green-500 text-green-800";
                } else {
                    return "bg-red-100 border-red-300 text-red-700";
                }
            };

            return (
                <div className="max-w-4xl mx-auto p-6 bg-white min-h-screen">
                    {/* í—¤ë” */}
                    <div className="text-center mb-8">
                        <h1 className="text-3xl font-bold text-gray-800 mb-2">ğŸ‡¯ğŸ‡µ JLPT N1 AI ë¬¸ì œ ìƒì„±ê¸°</h1>
                        <p className="text-gray-600">AIê°€ ì‹¤ì‹œê°„ìœ¼ë¡œ ìƒˆë¡œìš´ N1 ë¬¸ì œë¥¼ ìƒì„±í•©ë‹ˆë‹¤!</p>
                    </div>

                    {/* ìƒíƒœ í‘œì‹œ */}
                    <div className="grid md:grid-cols-3 gap-4 mb-6">
                        <div className="bg-blue-50 p-4 rounded-lg text-center">
                            <div className="text-lg font-semibold text-blue-800">
                                ì •ë‹µë¥ : {score.total > 0 ? Math.round((score.correct / score.total) * 100) : 0}% 
                                ({score.correct}/{score.total})
                            </div>
                        </div>
                        <div className="bg-green-50 p-4 rounded-lg text-center">
                            <div className="text-lg font-semibold text-green-800">
                                ìƒì„±ëœ ë¬¸ì œ: {generationHistory.length}ê°œ
                            </div>
                        </div>
                        <div className="bg-purple-50 p-4 rounded-lg text-center">
                            <div className="text-sm font-semibold text-purple-800">
                                {apiStatus}
                            </div>
                        </div>
                    </div>

                    {/* ë¬¸ì œ ìœ í˜• ì„ íƒ */}
                    <div className="mb-6">
                        <h3 className="text-lg font-semibold mb-3">ë¬¸ì œ ìœ í˜• ì„ íƒ</h3>
                        <div className="flex flex-wrap gap-2">
                            {[
                                { value: 'random', label: 'ğŸ² ëœë¤' },
                                { value: 'kanji', label: 'æ¼¢ í•œì ì½ê¸°' },
                                { value: 'grammar', label: 'ğŸ“ ë¬¸ë²•' },
                                { value: 'vocabulary', label: 'ğŸ“š ì–´íœ˜' },
                                { value: 'reading', label: 'ğŸ“– ë…í•´' }
                            ].map((type) => (
                                <button
                                    key={type.value}
                                    onClick={() => setSelectedType(type.value)}
                                    className={`px-4 py-2 rounded-lg transition-colors ${
                                        selectedType === type.value
                                            ? 'bg-blue-500 text-white'
                                            : 'bg-gray-100 text-gray-700 hover:bg-gray-200'
                                    }`}
                                >
                                    {type.label}
                                </button>
                            ))}
                        </div>
                    </div>

                    {/* ë¬¸ì œ ìƒì„± ë²„íŠ¼ */}
                    <div className="text-center mb-8">
                        <button
                            onClick={generateProblem}
                            disabled={isGenerating}
                            className="bg-green-500 hover:bg-green-600 disabled:bg-gray-400 text-white px-8 py-3 rounded-lg text-lg font-semibold transition-colors flex items-center gap-2 mx-auto"
                        >
                            {isGenerating ? (
                                <>
                                    <LoaderIcon />
                                    AIê°€ ë¬¸ì œ ìƒì„± ì¤‘...
                                </>
                            ) : (
                                <>
                                    ğŸš€ ìƒˆ ë¬¸ì œ ìƒì„±
                                </>
                            )}
                        </button>
                        {isGenerating && (
                            <p className="text-sm text-gray-600 mt-2">
                                ë§ì¶¤í˜• N1 ë¬¸ì œë¥¼ ìƒì„±í•˜ê³  ìˆìŠµë‹ˆë‹¤. ì ì‹œë§Œ ê¸°ë‹¤ë ¤ì£¼ì„¸ìš”...
                            </p>
                        )}
                    </div>

                    {/* ë¬¸ì œ í‘œì‹œ */}
                    {currentProblem && (
                        <div className="bg-gray-50 p-6 rounded-lg mb-6">
                            <div className="flex items-center justify-between mb-4">
                                <h3 className="text-xl font-semibold">
                                    {currentProblem.type === 'kanji' ? 'í•œì ì½ê¸°' : 
                                     currentProblem.type === 'grammar' ? 'ë¬¸ë²•' :
                                     currentProblem.type === 'vocabulary' ? 'ì–´íœ˜' : 'ë…í•´'} ë¬¸ì œ
                                </h3>
                                <div className="text-sm text-gray-500">
                                    {currentProblem.source} | {currentProblem.generatedAt}
                                </div>
                            </div>

                            {currentProblem.error && (
                                <div className="mb-4 p-3 bg-yellow-50 border border-yellow-200 rounded text-yellow-800">
                                    âš ï¸ {currentProblem.error}
                                </div>
                            )}







                            {/* ë…í•´ ì§€ë¬¸ */}
                            {currentProblem.type === 'reading' && (
                                <div className="mb-6 p-4 bg-white rounded border">
                                    <p className="text-gray-800 leading-relaxed text-lg">{currentProblem.passage}</p>
                                </div>
                            )}

                            {/* ë¬¸ì œ */}
                            <div className="mb-6">
                                <p className="text-lg mb-4">
                                    {currentProblem.type === 'kanji' ? (
                                        <>
                                            ë‹¤ìŒ ë¬¸ì¥ì˜ ë°‘ì¤„ ì¹œ ë¶€ë¶„ì˜ ì½ê¸°ë¡œ ê°€ì¥ ì ì ˆí•œ ê²ƒì„ ê³ ë¥´ì‹œì˜¤.<br />
                                            <span className="font-bold text-xl mt-2 block">
                                                {currentProblem.question?.replace('**' + currentProblem.underlined + '**', 
                                                    `<u>${currentProblem.underlined}</u>`).replace(/<u>|<\/u>/g, (match) => match === '<u>' ? '__' : '__')}
                                            </span>
                                        </>
                                    ) : currentProblem.type === 'reading' ? (
                                        <span className="font-bold">{currentProblem.question}</span>
                                    ) : (
                                        <>
                                            ë‹¤ìŒ ë¬¸ì¥ì˜ (ã€€)ì— ë“¤ì–´ê°ˆ ê°€ì¥ ì ì ˆí•œ ê²ƒì„ ê³ ë¥´ì‹œì˜¤.<br />
                                            <span className="font-bold text-xl mt-2 block">{currentProblem.question}</span>
                                        </>
                                    )}
                                </p>
                            </div>

                            {/* ì„ íƒì§€ */}
                            <div className="grid grid-cols-1 md:grid-cols-2 gap-3 mb-4">
                                {currentProblem.choices?.map((choice, index) => (
                                    <button
                                        key={index}
                                        onClick={() => handleAnswer(index)}
                                        disabled={showAnswer}
                                        className={`p-4 rounded-lg text-left transition-colors ${getButtonStyle(index)}`}
                                    >
                                        <span className="font-semibold mr-2">{index + 1}.</span>
                                        {choice}
                                    </button>
                                ))}
                            </div>

                            {/* ì •ë‹µ ë° í•´ì„¤ */}
                            {showAnswer && (
                                <div className="mt-6 p-4 bg-blue-50 rounded-lg">
                                    <h4 className="font-semibold text-blue-800 mb-2">ì •ë‹µ ë° í•´ì„¤</h4>
                                    <p className="text-blue-700">
                                        <span className="font-bold">ì •ë‹µ:</span> {currentProblem.correct + 1}ë²ˆ - {currentProblem.choices[currentProblem.correct]}
                                    </p>
                                    <p className="text-blue-700 mt-2">
                                        <span className="font-bold">í•´ì„¤:</span> {currentProblem.explanation}
                                    </p>
                                </div>
                            )}
                        </div>
                    )}

                    {/* ìµœê·¼ ìƒì„± ì´ë ¥ */}
                    {generationHistory.length > 0 && (
                        <div className="mt-8">
                            <h3 className="text-lg font-semibold mb-3">ìµœê·¼ ìƒì„±ëœ ë¬¸ì œë“¤</h3>
                            <div className="grid md:grid-cols-2 gap-3">
                                {generationHistory.slice(0, 4).map((problem) => (
                                    <div key={problem.id} className="bg-gray-100 p-3 rounded text-sm">
                                        <div className="flex justify-between items-center mb-1">
                                            <span className="font-semibold">
                                                {problem.type === 'kanji' ? 'í•œì' : 
                                                 problem.type === 'grammar' ? 'ë¬¸ë²•' :
                                                 problem.type === 'vocabulary' ? 'ì–´íœ˜' : 'ë…í•´'}
                                            </span>
                                            <span className="text-gray-500">{problem.source}</span>
                                        </div>
                                        <p className="text-gray-700 truncate">
                                            {problem.question?.substring(0, 50)}...
                                        </p>
                                    </div>
                                ))}
                            </div>
                        </div>
                    )}

                    {/* í‘¸í„° */}
                    <div className="mt-12 text-center text-gray-500 text-sm">
                        <p>JLPT N1 ëŒ€ë¹„ìš© ë¬¸ì œ ìƒì„±ê¸°</p>
                        <p>ì‹¤ì œ ì‹œí—˜ê³¼ëŠ” ë‹¤ë¥¼ ìˆ˜ ìˆìœ¼ë‹ˆ ì°¸ê³ ìš©ìœ¼ë¡œë§Œ ì‚¬ìš©í•´ì£¼ì„¸ìš”.</p>
                    </div>
                </div>
            );
        };

        // React 18 ë°©ì‹ìœ¼ë¡œ ì•± ë Œë”ë§
        const root = createRoot(document.getElementById('root'));
        root.render(<JLPTGenerator />);
    </script>
</body>
</html>
